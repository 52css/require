/**
 * Created by Ivan on 2015/3/24.
 * Version: 0.0.1
 */void function(e,t){function n(e,t){return"function"==typeof e&&e.call?n.require(k+",ready",e):(n.fn||n.error("必须加载node模块"),new n.fn.init(e,t))}function r(e,t){var n,r=[].slice.call(arguments),o=1,i="boolean"==typeof r[r.length-1]?r.pop():!0;for(1===r.length&&(e=this.window?{}:this,o=0);t=r[o++];)for(n in t)!A.call(t,n)||!i&&n in e||(e[n]=t[n]);return e}function o(e){var t;try{a.b.c()}catch(n){t=n.stack,!t&&window.opera&&(t=(String(n).match(/of linked script \S+/g)||[]).join(" "))}if(t)return t=t.split(/[@ ]/g).pop(),t="("===t[0]?t.slice(1,-1):t.replace(/\s/,""),t.replace(/(:\d+)?:\d+$/i,"");for(var r,o=(e?document:x).getElementsByTagName("script"),i=o.length;r=o[--i];)if((e||r.className===T)&&"interactive"===r.readyState)return r.className=r.src}function i(e,t){for(var n in e)if("司徒正美"===e[n]&&2!==B[n].state&&(n===t||i(B[n].deps,t)))return!0}function c(){e:for(var e,t=j.length;e=j[--t];){var n=B[e],r=n.deps;for(var o in r)if(A.call(r,o)&&2!==B[o].state)continue e;2!==n.state&&(j.splice(t,1),d(n.id,n.args,n.factory),c())}}function s(e,t,r){var o=e.src;return e.onload=e.onreadystatechange=e.onerror=null,t||r&&!B[o].state?(setTimeout(function(){x.removeChild(e)}),void n.log("加载 "+o+" 失败"+t+" "+!B[o].state,7)):!0}function l(e,t,r,o){if(/^(mass|ready)$/.test(e))return e;if(n.config.alias[e])r=n.config.alias[e],"object"==typeof r&&(o=r,r=r.src);else if(/^(\w+)(\d)?:.*/.test(e))r=e;else{t=t.substr(0,t.lastIndexOf("/"));var i=e.charAt(0);if("."!==i&&"/"!==i)r=g+e;else if("./"===e.slice(0,2))r=t+e.slice(1);else if(".."===e.slice(0,2))for(r=t+"/"+e;$.test(r);)r=r.replace($,"");else"/"===i?r=t+e:n.error("不符合模块标识规则: "+e)}var a,s=r.replace(/[?#].*/,"");return/\.(css|js)$/.test(s)&&(a=RegExp.$1),a||(s+=".js",a="js"),"js"===a?(B[s]||(B[s]={id:s,parent:t,exports:{}},o?require(o.deps||"",function(){u(s,function(){B[s].state=2,B[s].exports="function"==typeof o.exports?o.exports():window[o.exports],c()})}):u(s)),s):void f(s)}function u(e,r){var o=t.createElement("script");o.className=T,o[N?"onload":"onreadystatechange"]=function(){if(N||/loaded|complete/i.test(o.readyState)){var e=S.pop();e&&e.delay(o.src),r&&r(),s(o,!1,!N)&&n.log("已成功加载 "+o.src,7)}},o.onerror=function(){s(o,!0)},o.src=e,x.insertBefore(o,x.firstChild),n.log("正准备加载 "+o.src,7)}function f(e){var n=e.replace(h,"");if(!t.getElementById(n)){var r=t.createElement("link");r.rel="stylesheet",r.href=e,r.id=n,x.insertBefore(r,x.firstChild)}}function d(t,n,r){for(var o,i=0,a=[];o=n[i++];)a.push(B[o].exports);var c=Object(B[t]),s=r.apply(e,a);return c.state=2,void 0!==s&&(B[t].exports=s),s}function p(){B.ready.state=2,c(),C&&n.unbind(t,W,C),p=n.noop}function m(){try{E.doScroll("left"),p()}catch(e){setTimeout(m)}}var g,v,y=e.$,h=/(#.+|\W)/g,b=t.URL.replace(h,""),w=e[b],N=t.dispatchEvent,E=t.documentElement,x=t.head||t.getElementsByTagName("head")[0],j=[],S=[],q=1,L="",k="mass,lang,class,flow,data,support,query,node,attr,css,event,ajax,fx",T="mass"+(new Date-0),A=Object.prototype.hasOwnProperty,D={"[object HTMLDocument]":"Document","[object HTMLCollection]":"NodeList","[object StaticNodeList]":"NodeList","[object DOMWindow]":"Window","[object global]":"Window","null":"Null",NaN:"NaN",undefined:"Undefined"},O=D.toString;if("function"!=typeof w&&(w=n,w.uuid=1),w.mass!==q){w[q]=n,(w.mass||y&&null==y.mass)&&(L=(q+"").replace(/\D/g,"")),r(n,{html:E,head:x,mix:r,rword:/[^, ]+/g,rmapper:/(\w+)_(\w+)/g,mass:q,hasOwn:function(e,t){return A.call(e,t)},"@bind":N?"addEventListener":"attachEvent",slice:N?function(e,t,n){return S.slice.call(e,t,n)}:function(e,t,n){var r=[],o=e.length;if(void 0===n||"number"==typeof n&&isFinite(n)){t=parseInt(t,10)||0,n=void 0==n?o:parseInt(n,10),0>t&&(t+=o),n>o&&(n=o),0>n&&(n+=o);for(var i=t;n>i;++i)r[i-t]=e[i]}return r},getUid:N?function(e){return e.uniqueNumber||(e.uniqueNumber=w.uuid++)}:function(e){if(1!==e.nodeType)return e.uniqueNumber||(e.uniqueNumber=w.uuid++);var t=e.getAttribute("uniqueNumber");return t||(t=w.uuid++,e.setAttribute("uniqueNumber",t)),+t},bind:N?function(e,t,n,r){return e.addEventListener(t,n,!!r),n}:function(e,t,n){return e.attachEvent&&e.attachEvent("on"+t,n),n},unbind:N?function(e,t,r,o){e.removeEventListener(t,r||n.noop,!!o)}:function(e,t,r){e.detachEvent&&e.detachEvent("on"+t,r||n.noop)},type:function(e,t){var n=D[null==e||e!==e?e:O.call(e)]||e.nodeName||"#";return"#"===n.charAt(0)&&(n=e==e.document&&e.document!=e?"Window":9===e.nodeType?"Document":e.callee?"Arguments":isFinite(e.length)&&e.item?"NodeList":O.call(e).slice(8,-1)),t?t===n:n},log:function(r,o,i){for(var a=1,c=!0;a<arguments.length;a++)i=arguments[a],"number"==typeof i?c=i<=n.config.level:i===!0&&(o=!0);return c&&(o===!0?n.require("ready",function(){var e=t.createElement("pre");e.className="mass_sys_log",e.innerHTML=r+"",t.body.appendChild(e)}):window.opera?opera.postError(r):e.console&&console.info&&console.log&&console.log(r)),r},oneObject:function(e,t){"string"==typeof e&&(e=e.match(n.rword)||[]);for(var r={},o=void 0!==t?t:1,i=0,a=e.length;a>i;i++)r[e[i]]=o;return r},config:function(e){for(var t in e)if(A.call(e,t)){var n=e[t];"function"==typeof v.plugin[t]?v.plugin[t](n):v[t]=n}return this},exports:function(t){return e.$=y,t=t||n.config.nick,n.config.nick=t,e[b]=w,e[t]=this},noop:function(){},error:function(e,t){throw new(t||Error)(e)}}),function(){var e=o(!0);e||(e=n.slice(document.scripts).pop().src);var r=e.replace(/[?#].*/,"");v=n.config,v.plugin={},v.alias={},g=v.base=r.slice(0,r.lastIndexOf("/")+1);for(var i,a=t.getElementsByTagName("script"),c=0;i=a[c++];)if(i.src===e){v.nick=i.getAttribute("nick")||"$";break}v.level=9}(),v.plugin.alias=function(e){var t=v.alias;for(var r in e)if(A.call(e,r)){var o=t[r],i=e[r];o&&n.error("注意"+r+"出经重写过"),t[r]=i}},"Boolean,Number,String,Function,Array,Date,RegExp,Window,Document,Arguments,NodeList".replace(n.rword,function(e){D["[object "+e+"]"]=e});var B=n.modules={ready:{exports:n},mass:{state:2,exports:n}},$=/\/\w+\/\.\./;window.require=n.require=function(e,t,r){var o={},i=[],a=0,s=0,u=r||"callback"+setTimeout("1");r=r||g,String(e).replace(n.rword,function(e){var t=l(e,r);t&&(a++,B[t]&&2===B[t].state&&s++,o[t]||(i.push(t),o[t]="司徒正美"))}),B[u]={id:u,factory:t,deps:o,args:i,state:1},a===s?d(u,i,t):j.unshift(u),c()},require.config=v,window.define=n.define=function(e,t,r){var a=n.slice(arguments);if("string"==typeof e)var c=a.shift();if("boolean"==typeof a[0]){if(a[0])return;a.shift()}"function"==typeof a[0]&&a.unshift([]),e=B[e]&&B[e].state>=1?c:o(),!B[name]&&c&&(B[name]={id:name,factory:r,state:1}),r=a[1],r.id=c,r.delay=function(e){a.push(e);var t=!0;try{t=i(B[e].deps,e)}catch(o){}t&&n.error(e+"模块与之前的某些模块存在循环依赖"),delete r.delay,require.apply(null,a)},e?r.delay(e,a):S.push(r)},n.define.amd=B,k.replace(n.rword,function(e){n.config.alias["$"+e]=g+e+".js"});var C,W=N?"DOMContentLoaded":"readystatechange";if(!t.readyState)var I=t.readyState=t.body?"complete":"loading";if("complete"===t.readyState)p();else if(n.bind(t,W,C=function(){(N||"complete"===t.readyState)&&(p(),I&&(t.readyState="complete"))}),E.doScroll)try{self.eval===parent.eval&&m()}catch(M){m()}e.VBArray&&"abbr,article,aside,audio,base,bdi,canvas,data,datalist,details,figcaption,figure,footer,header,hgroup,m,mark,meter,nav,output,progress,section,summary,time,video".replace(n.rword,function(e){t.createElement(e)}),n.bind(e,"popstate",function(){b=t.URL.replace(h,""),n.exports()}),n.exports(n.config.nick+L)}}(self,self.document);